<div ng-include="'components/navbar/navbar.html'"></div>

<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <h3 class="page-header">{{ album.name }}</h3>

      <p>{{ album.description }}, van {{ album.startDateStr }} tot {{ album.endDateStr }}. Er zijn {{ media.length }} bestanden in dit album.</p>
      <p>Je kunt <b><a href="/album/{{ album._id }}/{{ album.name }}/upload">ook nieuwe fotos uploaden</a></b>. Deze worden automatisch aan het album toegevoegd</p>
      <div ng-hide="overviewActive()">
        <span>
          Delete deze foto:
          <img ng-show="isAdmin()" ng-src="assets/images/delete.png" style="max-height: 10px;" ng-click="removeMedia(selectedMedia)">
        </span>
      </div>
    </div>
  </div>
  <div ng-switch on="overviewActive()">
    <!-- Single media -> detailed view -->
    <div class="animate-switch" ng-switch-when="false">
      <div>
        <div class="row slide slide-animation non-draggable-image" ng-switch on="selectedMedia.mediaType"
             ng-swipe-right="setMedia(prevMediaID)" ng-swipe-left="setMedia(nextMediaID)">
          <div ng-switch-when="image">
            <img
              class="showcase center-block"
              ng-src="{{ util.asTrustedResource(selectedMedia.url, largeSize) }}"
              alt="{{ selectedMedia.name }}"
              ng-left="setMedia(prevMediaID)"
              ng-right="setMedia(nextMediaID)"
              tabindex="0"
              >
          </div>
          <div ng-switch-when="video">
            <video controls preload="metadata">
              <source ng-src="{{ util.asTrustedResource(selectedMedia.url.webm, largeSize) }}" type="video/webm">
              <source ng-src="{{ util.asTrustedResource(selectedMedia.url.mp4, largeSize) }}" type="video/mp4">
              Your browser does not support the <code>video</code> element.
            </video>
          </div>
        </div>
        <div class="row controls">
          <img ng-src="assets/images/left.png" ng-show="hasMediaAtPosition(prevMediaID)"
               ng-click="setMedia(prevMediaID)">
          <img ng-src="assets/images/up.png" ng-click="setMedia(undefined)">
          <img ng-src="assets/images/right.png" ng-show="hasMediaAtPosition(nextMediaID)"
               ng-click="setMedia(nextMediaID)">
        </div>
        <div class="row comments">
          <div class="col-xs-12 col-centered comment" ng-repeat="c in comments | orderBy:'timestamp'" ng-class-odd="'oddcomment'" ng-class-even="'evencomment'">
            <div class="commentheader">
              Geplaatst door <span class="commentauthor">{{ c.author.name }}</span> op <span class="commenttimestamp">{{ util.humanReadableTimestamp(c.timestamp) }}</span>
            </div>
            <div class="commentcontent">
              {{ c.text }}
            </div>
          </div>
        </div>
        <div class="row write-comment">
          <form ng-submit="saveCommentById()">
            <textarea class="input-lg user-comment" ng-model="comment.text" type="text" name="user-comment" placeholder="Je reactie"></textarea>
            <span class="input-lg error" ng-show="comment.error">{{ comment.error }}</span>
            <button type="submit" class="btn btn-success btn-lg btn-block">
              <span class="glyphicon glyphicon-flash"></span> Opslaan
            </button>
          </form>
        </div>
      </div>
    </div>
    <div class="animate-switch" ng-switch-when="true">
      <!-- Overview -->
      <div class="row row-centered">
        <div class="col-xs-4 col-centered media-data" ng-repeat="m in media">
          <div ng-switch on="m.mediaType">
            <img
              ng-switch-when="image"
              class="media"
              ng-src="{{ util.asTrustedResource(m.url, thumbSize) }}"
              alt="{{ m.name }}" ng-click="setMedia($index)"
              >
            <video ng-switch-when="video" class="media" controls preload="metadata">
              <source ng-src="{{ util.asTrustedResource(m.url.webm, thumbSize) }}" type="video/webm">
              <source ng-src="{{ util.asTrustedResource(m.url.mp4, thumbSize) }}" type="video/mp4">
              Your browser does not support the <code>video</code> element.
            </video>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div ng-include="'components/footer/footer.html'"></div>
